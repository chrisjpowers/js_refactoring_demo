!!! 5
%html{html_attrs}
  %head
    %title JS Refactoring Demo
    %script{:type => 'text/javascript', :src => "http://js.pusherapp.com/1.4/pusher.min.js"}
    %script{:type => 'text/javascript', :src => "/javascripts/jquery.js"}
    %script{:type => 'text/javascript', :src => "/javascripts/chat.js"}
    %link{:href => "/stylesheets/chat.css", :media => "screen", :rel => "stylesheet", :type => "text/css"}
  
  %body
    %h1#header JS Refactoring Demo
    %ul#messages
    
    %form{:action => '/', :method => 'POST', :id => 'message_form'}
      .field
        %label{:for => 'message_name'} Your Name
        %input{:type => 'text', :id => 'message_name', :name => 'message[name]'}
      .field
        %label{:for => 'message_body'} Message
        %textarea{:id => 'message_body', :name => 'message[body]'}
      .submit
        %button{:type => 'submit', :id => 'submit_button'} Submit
    
      %p#challenge
        This Javascript may run okay right now, but it's brittle and
        virtually impossible to test. How can you refactor this code
        to make it easier to maintain, extend and test?